{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.ReverseProxy": "Debug"
    }
  },

  "SwaggerEndpoints": [
    {
      "name": "Identity API",
      "url": "/api/identity/swagger/v1/swagger.json"
    },
    {
      "name": "Basket API",
      "url": "/api/basket/swagger/v1/swagger.json"
    },
    {
      "name": "Inventory API",
      "url": "/api/inventory/swagger/v1/swagger.json"
    },
    {
      "name": "Ordering API",
      "url": "/api/ordering/swagger/v1/swagger.json"
    },
    {
      "name": "Report API",
      "url": "/api/report/swagger/v1/swagger.json"
    },
    {
      "name": "Payment API",
      "url": "/api/payment/swagger/v1/swagger.json"
    },
    {
      "name": "Product API",
      "url": "/api/product/swagger/v1/swagger.json"
    }
  ],

  "ReverseProxy": {
    "Routes": {
      "catalog": {
        "ClusterId": "catalog",
        "Match": { "Path": "/api/catalog/{**remainder}" },
        "Transforms": [ { "PathRemovePrefix": "/api/catalog" } ]
      },
      "identity": {
        "ClusterId": "identity",
        "Match": { "Path": "/api/identity/{**remainder}" },
        "Transforms": [
          { "PathRemovePrefix": "/api/identity" },
          {
            "RequestHeader": "X-Forwarded-Prefix",
            "Set": "/api/identity"
          },
          {
            "RequestHeader": "X-Forwarded-Host",
            "Set": "{host}"
          },
          {
            "RequestHeader": "X-Forwarded-Proto",
            "Set": "{scheme}"
          }
        ]
      },
      "product": {
        "ClusterId": "product",
        "Match": { "Path": "/api/product/{**remainder}" },
        "Transforms": [
          { "PathRemovePrefix": "/api/product" },
          {
            "RequestHeader": "X-Forwarded-Prefix",
            "Set": "/api/product"
          },
          {
            "RequestHeader": "X-Forwarded-Host",
            "Set": "{host}"
          },
          {
            "RequestHeader": "X-Forwarded-Proto",
            "Set": "{scheme}"
          }
        ]
      },
      "basket": {
        "ClusterId": "basket",
        "Match": { "Path": "/api/basket/{**remainder}" },
        "Transforms": [
          { "PathRemovePrefix": "/api/basket" },
          {
            "RequestHeader": "X-Forwarded-Prefix",
            "Set": "/api/basket"
          },
          {
            "RequestHeader": "X-Forwarded-Host",
            "Set": "{host}"
          },
          {
            "RequestHeader": "X-Forwarded-Proto",
            "Set": "{scheme}"
          }
        ]
      },
      "ordering": {
        "ClusterId": "ordering",
        "Match": { "Path": "/api/ordering/{**remainder}" },
        "Transforms": [
          { "PathRemovePrefix": "/api/ordering" },
          {
            "RequestHeader": "X-Forwarded-Prefix",
            "Set": "/api/ordering"
          },
          {
            "RequestHeader": "X-Forwarded-Host",
            "Set": "{host}"
          },
          {
            "RequestHeader": "X-Forwarded-Proto",
            "Set": "{scheme}"
          }
        ]
      },
      "report": {
        "ClusterId": "report",
        "Match": { "Path": "/api/report/{**remainder}" },
        "Transforms": [
          { "PathRemovePrefix": "/api/report" },
          {
            "RequestHeader": "X-Forwarded-Prefix",
            "Set": "/api/report"
          },
          {
            "RequestHeader": "X-Forwarded-Host",
            "Set": "{host}"
          },
          {
            "RequestHeader": "X-Forwarded-Proto",
            "Set": "{scheme}"
          }
        ]
      },
      "inventory": {
        "ClusterId": "inventory",
        "Match": { "Path": "/api/inventory/{**remainder}" },
        "Transforms": [
          { "PathRemovePrefix": "/api/inventory" },
          {
            "RequestHeader": "X-Forwarded-Prefix",
            "Set": "/api/inventory"
          },
          {
            "RequestHeader": "X-Forwarded-Host",
            "Set": "{host}"
          },
          {
            "RequestHeader": "X-Forwarded-Proto",
            "Set": "{scheme}"
          }
        ]
      },
      "payment": {
        "ClusterId": "payment",
        "Match": { "Path": "/api/payment/{**remainder}" },
        "Transforms": [
          { "PathRemovePrefix": "/api/payment" },
          {
            "RequestHeader": "X-Forwarded-Prefix",
            "Set": "/api/payment"
          },
          {
            "RequestHeader": "X-Forwarded-Host",
            "Set": "{host}"
          },
          {
            "RequestHeader": "X-Forwarded-Proto",
            "Set": "{scheme}"
          }
        ]
      }
    },
    "Clusters": {
      "identity": { "Destinations": { "d1": { "Address": "http://localhost:5101/" } } },
      "inventory": { "Destinations": { "d1": { "Address": "http://localhost:5301/" } } },
      "ordering": { "Destinations": { "d1": { "Address": "http://localhost:5401/" } } },
      "payment": { "Destinations": { "d1": { "Address": "http://localhost:5501/" } } },
      "product": { "Destinations": { "d1": { "Address": "http://localhost:5111/" } } },
      "basket": { "Destinations": { "d1": { "Address": "http://localhost:5120/" } } },
      "report": { "Destinations": { "d1": { "Address": "http://localhost:5121/" } } }
    }
  }
}