// Proto definition for InventoryService gRPC communication.
// Định nghĩa các message và service dùng để kiểm tra tồn kho sản phẩm.
// Sử dụng cho giao tiếp giữa các service trong hệ thống Ecommerce.

syntax = "proto3";

// Namespace C# sinh ra khi generate code từ proto này.
option csharp_namespace = "InventoryService.Grpc";

// Package proto cho Inventory.
package inventory;

// Yêu cầu kiểm tra tồn kho sản phẩm.
// - productId: Mã sản phẩm (kiểu Guid dạng chuỗi)
// - warehouseId: Mã kho (tùy chọn, nếu để trống sẽ kiểm tra tổng tất cả kho)
// - quantity: Số lượng cần kiểm tra (>= 1)
message CheckStockRequest {
  string productId = 1;    // Guid string
  string warehouseId = 2;  // optional (để trống => tổng tất cả kho)
  int32  quantity = 3;     // >= 1
}

// Kết quả kiểm tra tồn kho.
// - available: Có đủ hàng hay không
// - availableQty: Số lượng hiện có
// - message: Thông điệp bổ sung (ví dụ: lý do không đủ hàng)
message CheckStockResponse {
  bool  available = 1;
  int32 availableQty = 2;
  string message = 3;
}

// Service Inventory cung cấp RPC kiểm tra tồn kho sản phẩm.
service Inventory {
  // Kiểm tra tồn kho cho sản phẩm tại kho chỉ định hoặc tất cả kho.
  rpc CheckStock (CheckStockRequest) returns (CheckStockResponse);
}